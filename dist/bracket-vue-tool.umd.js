(function(w,e){typeof exports=="object"&&typeof module<"u"?e(exports,require("vue")):typeof define=="function"&&define.amd?define(["exports","vue"],e):(w=typeof globalThis<"u"?globalThis:w||self,e(w.BracketVueTool={},w.Vue))})(this,function(w,e){"use strict";const x={SINGLE_ELIMINATION:"single_elimination",DOUBLE_ELIMINATION:"double_elimination"},y="TBD",r={ONE:"teamOne",TWO:"teamTwo"},N={CAN_SELECT_TEAM:"can_select_team",CAN_EDIT_DATE:"can_edit_date"},q={key:0,class:"flex items-center gap-2"},v=["src","alt"],D=["value","disabled"],W={key:1,class:"flex items-center gap-2"},j=["src","alt"],F={class:"text-gray-900 dark:text-white"},P={__name:"TeamSelect",props:{team:{type:Object,required:!0},teamPosition:{type:String,required:!0},availableTeams:{type:Array,required:!0},selectedTeams:{type:Array,required:!0},canEdit:{type:Boolean,required:!0},highlightedTeam:{type:Number,default:null},permissions:{type:Object,required:!0,default:()=>({[N.CAN_SELECT_TEAM]:!0})},isWinner:{type:Boolean,default:!1},isLoser:{type:Boolean,default:!1},shouldHighlight:{type:Boolean,default:!1}},emits:["update:team","highlight-team","unhighlight-team"],setup(t,{emit:p}){const a=t,i=p,n=e.ref(a.team.name),o=e.computed(()=>{var c;return n.value===y?null:((c=a.availableTeams.find(f=>f.name===n.value))==null?void 0:c.logo)||null});e.watch(()=>a.team,c=>{n.value=c.name},{immediate:!0}),e.onMounted(()=>{console.log("TeamSelect mounted:",{team:a.team,availableTeams:a.availableTeams})});const h=c=>c===y?!1:a.selectedTeams.includes(c)&&c!==a.team.name||c===a.team.name&&a.team.name!==y,T=e.computed(()=>a.availableTeams?a.availableTeams.filter(c=>c.name===y||c.name===a.team.name?!0:!h(c.name)):[]),m=()=>{a.team.name!==y&&i("highlight-team",a.team.name)},g=()=>{i("unhighlight-team")},b=()=>{const c=a.availableTeams.find(f=>f.name===n.value);console.log("Updating team:",{selectedTeam:n.value,selectedTeamData:c}),i("update:team",{position:a.teamPosition,team:{id:(c==null?void 0:c.id)||null,name:n.value,logo:(c==null?void 0:c.logo)||null,score:0}})};return(c,f)=>(e.openBlock(),e.createElementBlock("div",{class:e.normalizeClass(["flex-grow p-2.5 hover:bg-gray-200/30 dark:hover:bg-gray-950/20",{"hover:bg-green-500/20 dark:hover:bg-green-500/20":t.isWinner,"hover:bg-red-500/20 dark:hover:bg-red-500/20":t.isLoser,"bg-green-500/20 dark:bg-green-500/20":t.shouldHighlight&&t.isWinner,"bg-red-500/20 dark:bg-red-500/20":t.shouldHighlight&&t.isLoser}]),onMouseenter:m,onMouseleave:g},[t.canEdit&&t.permissions[e.unref(N).CAN_SELECT_TEAM]?(e.openBlock(),e.createElementBlock("div",q,[o.value?(e.openBlock(),e.createElementBlock("img",{key:0,src:o.value,alt:n.value,class:"w-6 h-6 rounded-full"},null,8,v)):e.createCommentVNode("",!0),e.withDirectives(e.createElementVNode("select",{"onUpdate:modelValue":f[0]||(f[0]=u=>n.value=u),class:"fi-select-input p-0 w-full border-none bg-transparent text-base text-gray-900 transition duration-75 focus:ring-0 disabled:text-gray-500 disabled:[-webkit-text-fill-color:theme(colors.gray.500)] dark:text-white dark:disabled:text-gray-400 dark:disabled:[-webkit-text-fill-color:theme(colors.gray.400)] sm:text-sm sm:leading-6 [&_optgroup]:bg-white [&_optgroup]:dark:bg-gray-900 [&_option]:bg-white [&_option]:dark:bg-gray-900 hover:cursor-pointer",onChange:b},[f[1]||(f[1]=e.createElementVNode("option",{value:"TBD"},"TBD",-1)),(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(T.value,u=>(e.openBlock(),e.createElementBlock("option",{key:u.id,value:u.name,disabled:h(u.name)},e.toDisplayString(u.name),9,D))),128))],544),[[e.vModelSelect,n.value]])])):(e.openBlock(),e.createElementBlock("div",W,[t.team.logo?(e.openBlock(),e.createElementBlock("img",{key:0,src:t.team.logo,alt:t.team.name,class:"w-6 h-6 rounded-full"},null,8,j)):e.createCommentVNode("",!0),e.createElementVNode("span",F,e.toDisplayString(t.team.name),1)]))],34))}},H={key:1,class:"text-white"},R={__name:"TeamScoreInput",props:{team:{type:Object,required:!0},teamPosition:{type:String,required:!0},canEditScore:{type:Boolean,required:!0},isFirstTeam:{type:Boolean,default:!1}},emits:["update:score"],setup(t,{emit:p}){const a=t,i=p,n=e.ref(!1),o=e.ref(a.team.score??0),h=()=>{a.canEditScore&&(n.value=!0)},T=()=>{const m=parseInt(o.value)||0;i("update:score",{position:a.teamPosition,score:m})};return e.watch(()=>a.team,m=>{o.value=m.score??0},{deep:!0}),(m,g)=>(e.openBlock(),e.createElementBlock("div",{class:e.normalizeClass(["p-2.5 bg-orange-500 dark:bg-orange-600 cursor-pointer min-w-10 text-center",{"border-b border-orange-600 dark:border-orange-700":t.isFirstTeam}]),onClick:h},[n.value?e.withDirectives((e.openBlock(),e.createElementBlock("input",{key:0,type:"number","onUpdate:modelValue":g[0]||(g[0]=b=>o.value=b),class:"w-12 border-none bg-orange-500 dark:bg-orange-600 text-center text-white text-base transition duration-75 focus:ring-0 disabled:text-gray-500 disabled:[-webkit-text-fill-color:theme(colors.gray.500)] dark:text-white dark:disabled:text-gray-400 dark:disabled:[-webkit-text-fill-color:theme(colors.gray.400)] sm:text-sm sm:leading-6 [&_optgroup]:bg-white [&_optgroup]:dark:bg-gray-900 [&_option]:bg-white [&_option]:dark:bg-gray-900",min:"0",onChange:T,onBlur:g[1]||(g[1]=b=>n.value=!1)},null,544)),[[e.vModelText,o.value]]):(e.openBlock(),e.createElementBlock("span",H,e.toDisplayString(t.team.score),1))],2))}},_={class:"flex"},$={__name:"TeamRow",props:{team:{type:Object,required:!0},teamPosition:{type:String,required:!0},availableTeams:{type:Array,required:!0},selectedTeams:{type:Array,required:!0},canEdit:{type:Boolean,required:!0},canEditScore:{type:Boolean,required:!0},isWinner:{type:Boolean,default:!1},isLoser:{type:Boolean,default:!1},shouldHighlight:{type:Boolean,default:!1},isFirstTeam:{type:Boolean,default:!1},highlightedTeam:{type:Number,default:null},permissions:{type:Object,required:!0,default:()=>({[N.CAN_SELECT_TEAM]:!0})}},emits:["update:team","update:score","highlight-team","unhighlight-team"],setup(t){return(p,a)=>(e.openBlock(),e.createElementBlock("div",_,[e.createVNode(P,{team:t.team,"team-position":t.teamPosition,"available-teams":t.availableTeams,"selected-teams":t.selectedTeams,"highlighted-team":t.highlightedTeam,permissions:t.permissions,"can-edit":t.canEdit,"is-winner":t.isWinner,"is-loser":t.isLoser,"should-highlight":t.shouldHighlight,"is-first-team":t.isFirstTeam,"onUpdate:team":a[0]||(a[0]=i=>p.$emit("update:team",i)),onHighlightTeam:a[1]||(a[1]=i=>p.$emit("highlight-team",i)),onUnhighlightTeam:a[2]||(a[2]=i=>p.$emit("unhighlight-team"))},null,8,["team","team-position","available-teams","selected-teams","highlighted-team","permissions","can-edit","is-winner","is-loser","should-highlight","is-first-team"]),e.createVNode(R,{team:t.team,"team-position":t.teamPosition,"can-edit-score":t.canEditScore,"is-first-team":t.isFirstTeam,"onUpdate:score":a[3]||(a[3]=i=>p.$emit("update:score",i))},null,8,["team","team-position","can-edit-score","is-first-team"])]))}},z={class:"flex flex-col w-full"},J={class:"px-3 py-1 text-xs text-gray-500 dark:text-gray-400 flex items-center justify-center"},G=["value","disabled"],K={class:"my-1.5 ml-2.5 bg-white dark:bg-gray-900 rounded overflow-hidden w-full min-w-[200px] shadow-sm ring-1 ring-gray-950/5 dark:bg-gray-900 dark:ring-white/10"},Q={key:0,class:"absolute top-1/2 left-full w-2.5 h-[calc(100%+2px)] border-2 border-gray-300 dark:border-gray-600 border-l-0 rounded-r flex items-center z-10 -mt-[-10px] ml-[15px] mx-2 transition-colors duration-200"},X={__name:"BracketMatch",props:{match:{type:Object,required:!0,default:()=>({teamOne:{name:y,score:0},teamTwo:{name:y,score:0},winner:null,date:new Date().toISOString().split("T")[0]})},index:{type:Number,required:!0},totalMatches:{type:Number,required:!0},availableTeams:{type:Array,required:!0},selectedTeams:{type:Array,required:!0},roundIndex:{type:Number,required:!0},highlightedTeam:{type:String,default:null},permissions:{type:Object,required:!0,default:()=>({[N.CAN_SELECT_TEAM]:!0,[N.CAN_EDIT_DATE]:!0})}},emits:["update:match","highlight-team","unhighlight-team"],setup(t,{emit:p}){const a=t,i=p,n=e.computed(()=>a.roundIndex===0&&a.permissions[N.CAN_SELECT_TEAM]),o=e.computed(()=>a.match[r.ONE].name!==y&&a.match[r.TWO].name!==y),h=l=>a.match.winner===l,T=l=>a.match.winner&&a.match.winner!==l,m=l=>{const d=a.match[l].name;return a.highlightedTeam===d},g=l=>{i("highlight-team",l)},b=()=>{i("unhighlight-team")},c=({position:l,team:d})=>{const s={...a.match,[l]:d};i("update:match",s)},f=({position:l,score:d})=>{const s={...a.match,[l]:{...a.match[l],score:d}};s[r.ONE].score>s[r.TWO].score?s.winner=r.ONE:s[r.TWO].score>s[r.ONE].score?s.winner=r.TWO:s.winner=null,i("update:match",s)},u=l=>l?new Date(l).toISOString().slice(0,16):"",E=l=>{const d={...a.match,date:l.target.value};i("update:match",d)};return(l,d)=>(e.openBlock(),e.createElementBlock("div",{class:e.normalizeClass(["relative text-[0.8em] flex items-center",{group:t.index%2==0&&t.totalMatches>1}])},[e.createElementVNode("div",z,[e.createElementVNode("div",J,[e.createElementVNode("input",{type:"datetime-local",value:u(t.match.date),onInput:E,class:"bg-transparent border-none focus:ring-0 p-0 text-xs",disabled:!t.permissions[e.unref(N).CAN_EDIT_DATE]},null,40,G)]),e.createElementVNode("div",K,[e.createVNode($,{team:t.match.teamOne,"team-position":e.unref(r).ONE,"available-teams":t.availableTeams,"selected-teams":t.selectedTeams,"can-edit":n.value,"can-edit-score":o.value,"is-winner":h(e.unref(r).ONE),"is-loser":T(e.unref(r).ONE),"should-highlight":m(e.unref(r).ONE),"is-first-team":!0,"can-select-team":l.canSelectTeam,"highlighted-team":t.highlightedTeam,permissions:t.permissions,"onUpdate:team":c,"onUpdate:score":f,onHighlightTeam:g,onUnhighlightTeam:b},null,8,["team","team-position","available-teams","selected-teams","can-edit","can-edit-score","is-winner","is-loser","should-highlight","can-select-team","highlighted-team","permissions"]),e.createVNode($,{team:t.match.teamTwo,"team-position":e.unref(r).TWO,"available-teams":t.availableTeams,"selected-teams":t.selectedTeams,"can-edit":n.value,"can-edit-score":o.value,"is-winner":h(e.unref(r).TWO),"is-loser":T(e.unref(r).TWO),"should-highlight":m(e.unref(r).TWO),"can-select-team":l.canSelectTeam,"highlighted-team":t.highlightedTeam,permissions:t.permissions,"onUpdate:team":c,"onUpdate:score":f,onHighlightTeam:g,onUnhighlightTeam:b},null,8,["team","team-position","available-teams","selected-teams","can-edit","can-edit-score","is-winner","is-loser","should-highlight","can-select-team","highlighted-team","permissions"])])]),t.index%2==0&&t.totalMatches>1?(e.openBlock(),e.createElementBlock("div",Q,d[0]||(d[0]=[e.createElementVNode("span",{class:"w-2.5 h-0.5 bg-gray-300 dark:bg-gray-600 translate-x-full block"},null,-1)]))):e.createCommentVNode("",!0)],2))}},Y={class:"flex-1 px-5 pb-2.5 grid grid-cols-[min-content_auto]"},Z={class:"text-[0.7em] text-gray-900 dark:text-white flex justify-end items-center opacity-50 mt-[23px]"},M={__name:"BracketColumn",props:{column:{type:Object,required:!0},columnIndex:{type:Number,required:!0},availableTeams:{type:Array,required:!0},selectedTeams:{type:Array,required:!0},highlightedTeam:{type:String,default:null},permissions:{type:Object,required:!0,default:()=>({[N.CAN_SELECT_TEAM]:!0})}},emits:["update:match","highlight-team","unhighlight-team"],setup(t,{emit:p}){const a=t,i=p,n=(o,h)=>{i("update:match",a.columnIndex,o,h)};return(o,h)=>(e.openBlock(),e.createElementBlock("div",Y,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(t.column.matches,(T,m)=>(e.openBlock(),e.createElementBlock(e.Fragment,{key:T.id},[e.createElementVNode("div",Z,e.toDisplayString(T.number),1),e.createVNode(X,{match:T,index:m,"total-matches":t.column.matches.length,"round-index":t.columnIndex,"available-teams":t.availableTeams,"selected-teams":t.selectedTeams,"highlighted-team":t.highlightedTeam,permissions:t.permissions,"onUpdate:match":g=>n(m,g),onHighlightTeam:h[0]||(h[0]=g=>o.$emit("highlight-team",g)),onUnhighlightTeam:h[1]||(h[1]=g=>o.$emit("unhighlight-team"))},null,8,["match","index","total-matches","round-index","available-teams","selected-teams","highlighted-team","permissions","onUpdate:match"])],64))),128))]))}},ee={class:"flex justify-between px-5"},te={class:"flex flex-col items-center gap-2"},ae={class:"mt-2"},ne={class:"flex items-center rounded-md bg-white dark:bg-gray-900 border border-gray-300 dark:border-gray-600"},le=["onUpdate:modelValue","onBlur"],oe={class:"grid shrink-0 grid-cols-1 focus-within:relative"},ie=["value","onChange"],re=["value"],V={__name:"BracketRoundHeaders",props:{columns:{type:Array,required:!0}},emits:["update:columns"],setup(t,{emit:p}){const a=t,i=p,n=[1,3,5,7,9],o=e.ref(a.columns.map(m=>m.name));e.watch(()=>a.columns,m=>{o.value=m.map(g=>g.name)},{deep:!0});const h=(m,g)=>{o.value[m]=g;const b=[...a.columns];b[m]={...b[m],name:g},i("update:columns",b)},T=(m,g)=>{const b=[...a.columns];b[m]={...b[m],bestOf:Number(g)},i("update:columns",b)};return(m,g)=>(e.openBlock(),e.createElementBlock("div",ee,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(t.columns,(b,c)=>(e.openBlock(),e.createElementBlock("div",{key:b.name,class:"flex-1 text-center text-sm text-gray-400 py-2 rounded overflow-hidden"},[e.createElementVNode("div",te,[e.createElementVNode("div",ae,[e.createElementVNode("div",ne,[e.withDirectives(e.createElementVNode("input",{type:"text","onUpdate:modelValue":f=>o.value[c]=f,onBlur:f=>h(c,f.target.value),class:"block min-w-0 grow py-1.5 pr-3 text-gray-800 dark:text-white border-none pl-1 text-base text-gray-900 bg-white dark:bg-gray-900 placeholder:text-gray-400 focus:outline-none sm:text-sm/6"},null,40,le),[[e.vModelText,o.value[c]]]),e.createElementVNode("div",oe,[e.createElementVNode("select",{value:b.bestOf,onChange:f=>T(c,f.target.value),class:"col-start-1 row-start-1 w-full text-gray-800 dark:text-white border-none appearance-none py-1.5 bg-white dark:bg-gray-900 pr-7 pl-3 text-base text-gray-500 placeholder:text-gray-400 focus:outline-2 focus:-outline-offset-2 focus:outline-indigo-600 sm:text-sm/6"},[(e.openBlock(),e.createElementBlock(e.Fragment,null,e.renderList(n,f=>e.createElementVNode("option",{key:f,value:f}," Best of "+e.toDisplayString(f),9,re)),64))],40,ie)])])])])]))),128))]))}},se={class:"flex flex-col mt-8 border-t-2 border-gray-300 dark:border-gray-600 pt-8"},ce={class:"flex flex-col"},me={class:"overflow-x-auto"},de={class:"min-w-max"},ue={class:"flex flex-1 p-5"},he={__name:"BracketLower",props:{initialState:{type:Array,required:!0},availableTeams:{type:Array,required:!0},defaultBestOf:{type:Number,default:3,validator:t=>[1,3,5,7,9].includes(t)},permissions:{type:Object,required:!0,default:()=>({[N.CAN_SELECT_TEAM]:!0,[N.CAN_EDIT_DATE]:!0})}},emits:["update:state"],setup(t,{emit:p}){const a=p,i=t,n=e.ref([]),o=e.ref(null),h=e.computed(()=>{const u=new Set;return n.value.forEach(E=>{E.matches.forEach(l=>{l[r.ONE].name!==y&&u.add(l[r.ONE].name),l[r.TWO].name!==y&&u.add(l[r.TWO].name)})}),Array.from(u)}),T=u=>{o.value=u},m=()=>{o.value=null},g=(u,E,l)=>{if(console.log("Updating lower match:",{roundIndex:u,matchIndex:E,updatedMatch:l}),n.value[u]&&n.value[u].matches){if(n.value[u].matches[E]=l,l.winner&&u<n.value.length-1){const d=u+1,s=Math.floor(E/2);if(n.value[d]&&n.value[d].matches[s]){const k=n.value[d].matches[s],O=E%2===0?r.ONE:r.TWO,B=l[l.winner];n.value[d].matches[s]={...k,[O]:{id:B.id,name:B.name,logo:B.logo,score:0}}}}c()}},b=u=>{console.log("Updating lower columns:",u),n.value=u,c()},c=()=>{console.log("Emitting lower tournament state:",n.value),a("update:state",n.value)},f=()=>{console.log("Initializing lower tournament with state:",i.initialState),i.initialState&&i.initialState.length>0&&(n.value=JSON.parse(JSON.stringify(i.initialState)))};return e.watch(()=>i.initialState,()=>{f()},{deep:!0}),e.onMounted(()=>{f()}),(u,E)=>(e.openBlock(),e.createElementBlock("div",se,[E[0]||(E[0]=e.createElementVNode("div",{class:"text-xl font-bold text-gray-800 dark:text-white mb-4"},"Lower Bracket",-1)),e.createElementVNode("div",ce,[e.createElementVNode("div",me,[e.createElementVNode("div",de,[e.createVNode(V,{columns:n.value,"onUpdate:columns":b},null,8,["columns"]),e.createElementVNode("div",ue,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(n.value,(l,d)=>(e.openBlock(),e.createBlock(M,{key:l.id,column:l,"column-index":d,"available-teams":t.availableTeams,"selected-teams":h.value,"highlighted-team":o.value,permissions:t.permissions,"onUpdate:match":g,onHighlightTeam:T,onUnhighlightTeam:m},null,8,["column","column-index","available-teams","selected-teams","highlighted-team","permissions"]))),128))])])])])]))}},C=()=>({id:null,name:y,logo:null,score:0}),U=t=>({id:`match-${t}`,number:t,[r.ONE]:C(),[r.TWO]:C(),winner:null,date:null}),ge=(t,p=3)=>{const a=[],i=Math.log2(t);let n=1;for(let o=0;o<i;o++){const h=Math.pow(2,i-o-1),T=[];for(let m=0;m<h;m++)T.push(U(n++));a.push({id:`upper-round-${o+1}`,name:`Round ${o+1}`,matches:T,bestOf:p})}return a},A=(t,p)=>{const a=[];let i=1;const n=t-1;for(let o=0;o<n;o++){const h=Math.pow(2,t-o-2),T=[];for(let m=0;m<h;m++)T.push(U(i++));a.push({id:`lower-round-${o+1}`,name:`Lower Round ${o+1}`,matches:T,bestOf:p})}return a},fe={class:"flex flex-col"},pe={class:"flex flex-col"},Te={class:"overflow-x-auto"},be={class:"min-w-max"},ye={class:"flex flex-1 p-5"},I={__name:"TournamentBracket",props:{initialState:{type:Object,required:!0},availableTeams:{type:Array,required:!0},defaultBestOf:{type:Number,required:!0},format:{type:String,required:!0},permissions:{type:Object,required:!0,default:()=>({[N.CAN_SELECT_TEAM]:!0})}},emits:["update:state"],setup(t,{emit:p}){const a=p,i=t,n=e.ref([]),o=e.ref([]),h=e.ref(null),T=e.computed(()=>{const l=new Set;return n.value.forEach(d=>{d.matches.forEach(s=>{s[r.ONE].name!==y&&l.add(s[r.ONE].name),s[r.TWO].name!==y&&l.add(s[r.TWO].name)})}),i.format===x.DOUBLE_ELIMINATION&&o.value.forEach(d=>{d.matches.forEach(s=>{s[r.ONE].name!==y&&l.add(s[r.ONE].name),s[r.TWO].name!==y&&l.add(s[r.TWO].name)})}),Array.from(l)}),m=l=>{h.value=l},g=()=>{h.value=null},b=(l,d,s)=>{if(console.log("Updating upper match:",{roundIndex:l,matchIndex:d,updatedMatch:s}),n.value[l]&&n.value[l].matches){if(n.value[l].matches[d]=s,s.winner&&l<n.value.length-1){const k=l+1,O=Math.floor(d/2);if(n.value[k]&&n.value[k].matches[O]){const B=n.value[k].matches[O],L=d%2===0?r.ONE:r.TWO,S=s[s.winner];n.value[k].matches[O]={...B,[L]:{id:S.id,name:S.name,logo:S.logo,score:0}}}}if(i.format===x.DOUBLE_ELIMINATION&&s.winner){const k=s[s.winner===r.ONE?r.TWO:r.ONE];if(k.name!==y){const O=Math.floor(l/2),B=Math.floor(d/2);if(o.value[O]&&o.value[O].matches[B]){const L=o.value[O].matches[B],S=d%2===0?r.ONE:r.TWO;o.value[O].matches[B]={...L,[S]:{id:k.id,name:k.name,logo:k.logo,score:0}}}}}u()}},c=l=>{console.log("Updating upper columns:",l),n.value=l,u()},f=l=>{console.log("Updating lower state:",l),o.value=l,u()},u=()=>{console.log("Emitting tournament state:",{upper:n.value,lower:i.format===x.DOUBLE_ELIMINATION?o.value:null}),a("update:state",{upper:n.value,lower:i.format===x.DOUBLE_ELIMINATION?o.value:null})},E=()=>{console.log("Initializing tournament with state:",i.initialState),i.initialState&&(Array.isArray(i.initialState)?(n.value=JSON.parse(JSON.stringify(i.initialState)),i.format===x.DOUBLE_ELIMINATION&&(o.value=A(n.value.length,i.defaultBestOf))):(n.value=JSON.parse(JSON.stringify(i.initialState.upper||[])),o.value=JSON.parse(JSON.stringify(i.initialState.lower||[]))))};return e.watch(()=>i.initialState,()=>{E()},{deep:!0}),e.watch(()=>i.format,l=>{l===x.DOUBLE_ELIMINATION&&(!o.value||o.value.length===0)&&(o.value=A(n.value.length,i.defaultBestOf),u())}),e.onMounted(()=>{E()}),(l,d)=>(e.openBlock(),e.createElementBlock("div",fe,[d[0]||(d[0]=e.createElementVNode("div",{class:"text-xl font-bold text-gray-800 dark:text-white mb-4"},"Upper Bracket",-1)),e.createElementVNode("div",pe,[e.createElementVNode("div",Te,[e.createElementVNode("div",be,[e.createVNode(V,{columns:n.value,"onUpdate:columns":c},null,8,["columns"]),e.createElementVNode("div",ye,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(n.value,(s,k)=>(e.openBlock(),e.createBlock(M,{key:s.id,column:s,"column-index":k,"available-teams":t.availableTeams,"selected-teams":T.value,"highlighted-team":h.value,permissions:t.permissions,"onUpdate:match":b,onHighlightTeam:m,onUnhighlightTeam:g},null,8,["column","column-index","available-teams","selected-teams","highlighted-team","permissions"]))),128))])])])]),t.format===e.unref(x).DOUBLE_ELIMINATION?(e.openBlock(),e.createBlock(he,{key:0,"initial-state":o.value,"available-teams":t.availableTeams,"default-best-of":t.defaultBestOf,permissions:t.permissions,"onUpdate:state":f},null,8,["initial-state","available-teams","default-best-of","permissions"])):e.createCommentVNode("",!0)]))}},Ee=t=>{t.component("TournamentBracket",I)};w.PERMISSIONS=N,w.TournamentBracket=I,w.createLowerBracketStructure=A,w.createTournamentState=ge,w.install=Ee,Object.defineProperty(w,Symbol.toStringTag,{value:"Module"})});
