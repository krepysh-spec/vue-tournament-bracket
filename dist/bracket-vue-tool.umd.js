(function(w,e){typeof exports=="object"&&typeof module<"u"?e(exports,require("vue")):typeof define=="function"&&define.amd?define(["exports","vue"],e):(w=typeof globalThis<"u"?globalThis:w||self,e(w.BracketVueTool={},w.Vue))})(this,function(w,e){"use strict";const B={SINGLE_ELIMINATION:"single_elimination",DOUBLE_ELIMINATION:"double_elimination"},y="TBD",r={ONE:"teamOne",TWO:"teamTwo"},N={CAN_SELECT_TEAM:"can_select_team",CAN_EDIT_DATE:"can_edit_date"},q={key:0,class:"flex items-center gap-2"},v=["src","alt"],D=["value","disabled"],W={key:1,class:"flex items-center gap-2"},R=["src","alt"],j={class:"text-gray-900 dark:text-white"},F={__name:"TeamSelect",props:{team:{type:Object,required:!0},teamPosition:{type:String,required:!0},availableTeams:{type:Array,required:!0},selectedTeams:{type:Array,required:!0},canEdit:{type:Boolean,required:!0},highlightedTeam:{type:Number,default:null},permissions:{type:Object,required:!0,default:()=>({[N.CAN_SELECT_TEAM]:!0})},isWinner:{type:Boolean,default:!1},isLoser:{type:Boolean,default:!1},shouldHighlight:{type:Boolean,default:!1}},emits:["update:team","highlight-team","unhighlight-team"],setup(t,{emit:p}){const a=t,i=p,n=e.ref(a.team.name),o=e.computed(()=>{var s;return n.value===y?null:((s=a.availableTeams.find(f=>f.name===n.value))==null?void 0:s.logo)||null});e.watch(()=>a.team,s=>{n.value=s.name},{immediate:!0}),e.onMounted(()=>{console.log("TeamSelect mounted:",{team:a.team,availableTeams:a.availableTeams})});const g=s=>s===y?!1:a.selectedTeams.includes(s)&&s!==a.team.name||s===a.team.name&&a.team.name!==y,b=e.computed(()=>a.availableTeams?a.availableTeams.filter(s=>s.name===y||s.name===a.team.name?!0:!g(s.name)):[]),c=()=>{a.team.name!==y&&i("highlight-team",a.team.name)},h=()=>{i("unhighlight-team")},T=()=>{const s=a.availableTeams.find(f=>f.name===n.value);console.log("Updating team:",{selectedTeam:n.value,selectedTeamData:s}),i("update:team",{position:a.teamPosition,team:{id:(s==null?void 0:s.id)||null,name:n.value,logo:(s==null?void 0:s.logo)||null,score:0}})};return(s,f)=>(e.openBlock(),e.createElementBlock("div",{class:e.normalizeClass(["flex-grow p-2.5 hover:bg-gray-200/30 dark:hover:bg-gray-950/20",{"hover:bg-green-500/20 dark:hover:bg-green-500/20":t.isWinner,"hover:bg-red-500/20 dark:hover:bg-red-500/20":t.isLoser,"bg-green-500/20 dark:bg-green-500/20":t.shouldHighlight&&t.isWinner,"bg-red-500/20 dark:bg-red-500/20":t.shouldHighlight&&t.isLoser}]),onMouseenter:c,onMouseleave:h},[t.canEdit&&t.permissions[e.unref(N).CAN_SELECT_TEAM]?(e.openBlock(),e.createElementBlock("div",q,[o.value?(e.openBlock(),e.createElementBlock("img",{key:0,src:o.value,alt:n.value,class:"w-6 h-6 rounded-full"},null,8,v)):e.createCommentVNode("",!0),e.withDirectives(e.createElementVNode("select",{"onUpdate:modelValue":f[0]||(f[0]=u=>n.value=u),class:"fi-select-input p-0 w-full border-none bg-transparent text-base text-gray-900 transition duration-75 focus:ring-0 disabled:text-gray-500 disabled:[-webkit-text-fill-color:theme(colors.gray.500)] dark:text-white dark:disabled:text-gray-400 dark:disabled:[-webkit-text-fill-color:theme(colors.gray.400)] sm:text-sm sm:leading-6 [&_optgroup]:bg-white [&_optgroup]:dark:bg-gray-900 [&_option]:bg-white [&_option]:dark:bg-gray-900 hover:cursor-pointer",onChange:T},[f[1]||(f[1]=e.createElementVNode("option",{value:"TBD"},"TBD",-1)),(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(b.value,u=>(e.openBlock(),e.createElementBlock("option",{key:u.id,value:u.name,disabled:g(u.name)},e.toDisplayString(u.name),9,D))),128))],544),[[e.vModelSelect,n.value]])])):(e.openBlock(),e.createElementBlock("div",W,[t.team.logo?(e.openBlock(),e.createElementBlock("img",{key:0,src:t.team.logo,alt:t.team.name,class:"w-6 h-6 rounded-full"},null,8,R)):e.createCommentVNode("",!0),e.createElementVNode("span",j,e.toDisplayString(t.team.name),1)]))],34))}},P={key:1,class:"text-white"},H={__name:"TeamScoreInput",props:{team:{type:Object,required:!0},teamPosition:{type:String,required:!0},canEditScore:{type:Boolean,required:!0},isFirstTeam:{type:Boolean,default:!1}},emits:["update:score"],setup(t,{emit:p}){const a=t,i=p,n=e.ref(!1),o=e.ref(a.team.score??0),g=()=>{a.canEditScore&&(n.value=!0)},b=()=>{const c=parseInt(o.value)||0;i("update:score",{position:a.teamPosition,score:c})};return e.watch(()=>a.team,c=>{o.value=c.score??0},{deep:!0}),(c,h)=>(e.openBlock(),e.createElementBlock("div",{class:e.normalizeClass(["p-2.5 bg-orange-500 dark:bg-orange-600 cursor-pointer min-w-10 text-center",{"border-b border-orange-600 dark:border-orange-700":t.isFirstTeam}]),onClick:g},[n.value?e.withDirectives((e.openBlock(),e.createElementBlock("input",{key:0,type:"number","onUpdate:modelValue":h[0]||(h[0]=T=>o.value=T),class:"w-12 border-none bg-orange-500 dark:bg-orange-600 text-center text-white text-base transition duration-75 focus:ring-0 disabled:text-gray-500 disabled:[-webkit-text-fill-color:theme(colors.gray.500)] dark:text-white dark:disabled:text-gray-400 dark:disabled:[-webkit-text-fill-color:theme(colors.gray.400)] sm:text-sm sm:leading-6 [&_optgroup]:bg-white [&_optgroup]:dark:bg-gray-900 [&_option]:bg-white [&_option]:dark:bg-gray-900",min:"0",onChange:b,onBlur:h[1]||(h[1]=T=>n.value=!1)},null,544)),[[e.vModelText,o.value]]):(e.openBlock(),e.createElementBlock("span",P,e.toDisplayString(t.team.score),1))],2))}},_={class:"flex"},V={__name:"TeamRow",props:{team:{type:Object,required:!0},teamPosition:{type:String,required:!0},availableTeams:{type:Array,required:!0},selectedTeams:{type:Array,required:!0},canEdit:{type:Boolean,required:!0},canEditScore:{type:Boolean,required:!0},isWinner:{type:Boolean,default:!1},isLoser:{type:Boolean,default:!1},shouldHighlight:{type:Boolean,default:!1},isFirstTeam:{type:Boolean,default:!1},highlightedTeam:{type:Number,default:null},permissions:{type:Object,required:!0,default:()=>({[N.CAN_SELECT_TEAM]:!0})}},emits:["update:team","update:score","highlight-team","unhighlight-team"],setup(t){return(p,a)=>(e.openBlock(),e.createElementBlock("div",_,[e.createVNode(F,{team:t.team,"team-position":t.teamPosition,"available-teams":t.availableTeams,"selected-teams":t.selectedTeams,"highlighted-team":t.highlightedTeam,permissions:t.permissions,"can-edit":t.canEdit,"is-winner":t.isWinner,"is-loser":t.isLoser,"should-highlight":t.shouldHighlight,"is-first-team":t.isFirstTeam,"onUpdate:team":a[0]||(a[0]=i=>p.$emit("update:team",i)),onHighlightTeam:a[1]||(a[1]=i=>p.$emit("highlight-team",i)),onUnhighlightTeam:a[2]||(a[2]=i=>p.$emit("unhighlight-team"))},null,8,["team","team-position","available-teams","selected-teams","highlighted-team","permissions","can-edit","is-winner","is-loser","should-highlight","is-first-team"]),e.createVNode(H,{team:t.team,"team-position":t.teamPosition,"can-edit-score":t.canEditScore,"is-first-team":t.isFirstTeam,"onUpdate:score":a[3]||(a[3]=i=>p.$emit("update:score",i))},null,8,["team","team-position","can-edit-score","is-first-team"])]))}},z={class:"flex flex-col w-full"},J={class:"px-3 py-1 text-xs text-gray-500 dark:text-gray-400 flex items-center justify-center"},G=["value","disabled"],K={class:"my-1.5 ml-2.5 bg-white dark:bg-gray-900 rounded overflow-hidden w-full min-w-[200px] shadow-sm ring-1 ring-gray-950/5 dark:bg-gray-900 dark:ring-white/10"},Q={key:0,class:"absolute top-1/2 left-full w-2.5 h-[calc(100%+2px)] border-2 border-gray-300 dark:border-gray-600 border-l-0 rounded-r flex items-center z-10 -mt-[-10px] ml-[15px] mx-2 transition-colors duration-200"},X={__name:"BracketMatch",props:{match:{type:Object,required:!0,default:()=>({teamOne:{name:y,score:0},teamTwo:{name:y,score:0},winner:null,date:new Date().toISOString().split("T")[0]})},index:{type:Number,required:!0},totalMatches:{type:Number,required:!0},availableTeams:{type:Array,required:!0},selectedTeams:{type:Array,required:!0},roundIndex:{type:Number,required:!0},highlightedTeam:{type:String,default:null},permissions:{type:Object,required:!0,default:()=>({[N.CAN_SELECT_TEAM]:!0,[N.CAN_EDIT_DATE]:!0})}},emits:["update:match","highlight-team","unhighlight-team"],setup(t,{emit:p}){const a=t,i=p,n=e.computed(()=>a.roundIndex===0),o=e.computed(()=>a.match[r.ONE].name!==y&&a.match[r.TWO].name!==y),g=l=>a.match.winner===l,b=l=>a.match.winner&&a.match.winner!==l,c=l=>{const d=a.match[l].name;return a.highlightedTeam===d},h=l=>{i("highlight-team",l)},T=()=>{i("unhighlight-team")},s=({position:l,team:d})=>{const m={...a.match,[l]:d};i("update:match",m)},f=({position:l,score:d})=>{const m={...a.match,[l]:{...a.match[l],score:d}};m.teamOne.score>0||m.teamTwo.score>0?m.winner=m.teamOne.score>m.teamTwo.score?r.ONE:r.TWO:m.winner=null,i("update:match",m)},u=l=>l?new Date(l).toISOString().slice(0,16):"",E=l=>{const d={...a.match,date:l.target.value};i("update:match",d)};return(l,d)=>(e.openBlock(),e.createElementBlock("div",{class:e.normalizeClass(["relative text-[0.8em] flex items-center",{group:t.index%2==0&&t.totalMatches>1}])},[e.createElementVNode("div",z,[e.createElementVNode("div",J,[e.createElementVNode("input",{type:"datetime-local",value:u(t.match.date),onInput:E,class:"bg-transparent border-none focus:ring-0 p-0 text-xs",disabled:!t.permissions[e.unref(N).CAN_EDIT_DATE]},null,40,G)]),e.createElementVNode("div",K,[e.createVNode(V,{team:t.match.teamOne,"team-position":e.unref(r).ONE,"available-teams":t.availableTeams,"selected-teams":t.selectedTeams,"can-edit":n.value,"can-edit-score":o.value,"is-winner":g(e.unref(r).ONE),"is-loser":b(e.unref(r).ONE),"should-highlight":c(e.unref(r).ONE),"is-first-team":!0,"can-select-team":l.canSelectTeam,"highlighted-team":t.highlightedTeam,permissions:t.permissions,"onUpdate:team":s,"onUpdate:score":f,onHighlightTeam:h,onUnhighlightTeam:T},null,8,["team","team-position","available-teams","selected-teams","can-edit","can-edit-score","is-winner","is-loser","should-highlight","can-select-team","highlighted-team","permissions"]),e.createVNode(V,{team:t.match.teamTwo,"team-position":e.unref(r).TWO,"available-teams":t.availableTeams,"selected-teams":t.selectedTeams,"can-edit":n.value,"can-edit-score":o.value,"is-winner":g(e.unref(r).TWO),"is-loser":b(e.unref(r).TWO),"should-highlight":c(e.unref(r).TWO),"can-select-team":l.canSelectTeam,"highlighted-team":t.highlightedTeam,permissions:t.permissions,"onUpdate:team":s,"onUpdate:score":f,onHighlightTeam:h,onUnhighlightTeam:T},null,8,["team","team-position","available-teams","selected-teams","can-edit","can-edit-score","is-winner","is-loser","should-highlight","can-select-team","highlighted-team","permissions"])])]),t.index%2==0&&t.totalMatches>1?(e.openBlock(),e.createElementBlock("div",Q,d[0]||(d[0]=[e.createElementVNode("span",{class:"w-2.5 h-0.5 bg-gray-300 dark:bg-gray-600 translate-x-full block"},null,-1)]))):e.createCommentVNode("",!0)],2))}},Y={class:"flex-1 px-5 pb-2.5 grid grid-cols-[min-content_auto]"},Z={class:"text-[0.7em] text-gray-900 dark:text-white flex justify-end items-center opacity-50 mt-[23px]"},$={__name:"BracketColumn",props:{column:{type:Object,required:!0},columnIndex:{type:Number,required:!0},availableTeams:{type:Array,required:!0},selectedTeams:{type:Array,required:!0},highlightedTeam:{type:String,default:null},permissions:{type:Object,required:!0,default:()=>({[N.CAN_SELECT_TEAM]:!0})}},emits:["update:match","highlight-team","unhighlight-team"],setup(t,{emit:p}){const a=t,i=p,n=(o,g)=>{i("update:match",a.columnIndex,o,g)};return(o,g)=>(e.openBlock(),e.createElementBlock("div",Y,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(t.column.items,(b,c)=>(e.openBlock(),e.createElementBlock(e.Fragment,{key:b.number},[e.createElementVNode("div",Z,e.toDisplayString(b.number),1),e.createVNode(X,{match:b,index:c,"total-matches":t.column.items.length,"round-index":t.columnIndex,"available-teams":t.availableTeams,"selected-teams":t.selectedTeams,"highlighted-team":t.highlightedTeam,permissions:t.permissions,"onUpdate:match":h=>n(c,h),onHighlightTeam:g[0]||(g[0]=h=>o.$emit("highlight-team",h)),onUnhighlightTeam:g[1]||(g[1]=h=>o.$emit("unhighlight-team"))},null,8,["match","index","total-matches","round-index","available-teams","selected-teams","highlighted-team","permissions","onUpdate:match"])],64))),128))]))}},ee={class:"flex justify-between px-5"},te={class:"flex flex-col items-center gap-2"},ae={class:"mt-2"},ne={class:"flex items-center rounded-md bg-white dark:bg-gray-900 border border-gray-300 dark:border-gray-600"},le=["onUpdate:modelValue","onBlur"],ie={class:"grid shrink-0 grid-cols-1 focus-within:relative"},oe=["value","onChange"],re=["value"],U={__name:"BracketRoundHeaders",props:{columns:{type:Array,required:!0}},emits:["update:columns"],setup(t,{emit:p}){const a=t,i=p,n=[1,3,5,7,9],o=e.ref(a.columns.map(c=>c.name));e.watch(()=>a.columns,c=>{o.value=c.map(h=>h.name)},{deep:!0});const g=(c,h)=>{o.value[c]=h;const T=[...a.columns];T[c]={...T[c],name:h},i("update:columns",T)},b=(c,h)=>{const T=[...a.columns];T[c]={...T[c],bestOf:Number(h)},i("update:columns",T)};return(c,h)=>(e.openBlock(),e.createElementBlock("div",ee,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(t.columns,(T,s)=>(e.openBlock(),e.createElementBlock("div",{key:T.name,class:"flex-1 text-center text-sm text-gray-400 py-2 rounded overflow-hidden"},[e.createElementVNode("div",te,[e.createElementVNode("div",ae,[e.createElementVNode("div",ne,[e.withDirectives(e.createElementVNode("input",{type:"text","onUpdate:modelValue":f=>o.value[s]=f,onBlur:f=>g(s,f.target.value),class:"block min-w-0 grow py-1.5 pr-3 text-gray-800 dark:text-white border-none pl-1 text-base text-gray-900 bg-white dark:bg-gray-900 placeholder:text-gray-400 focus:outline-none sm:text-sm/6"},null,40,le),[[e.vModelText,o.value[s]]]),e.createElementVNode("div",ie,[e.createElementVNode("select",{value:T.bestOf,onChange:f=>b(s,f.target.value),class:"col-start-1 row-start-1 w-full text-gray-800 dark:text-white border-none appearance-none py-1.5 bg-white dark:bg-gray-900 pr-7 pl-3 text-base text-gray-500 placeholder:text-gray-400 focus:outline-2 focus:-outline-offset-2 focus:outline-indigo-600 sm:text-sm/6"},[(e.openBlock(),e.createElementBlock(e.Fragment,null,e.renderList(n,f=>e.createElementVNode("option",{key:f,value:f}," Best of "+e.toDisplayString(f),9,re)),64))],40,oe)])])])])]))),128))]))}},se={class:"flex flex-col mt-8 border-t-2 border-gray-300 dark:border-gray-600 pt-8"},me={class:"flex flex-col"},ce={class:"overflow-x-auto"},de={class:"min-w-max"},ue={class:"flex flex-1 p-5"},he={__name:"BracketLower",props:{initialState:{type:Array,required:!0},availableTeams:{type:Array,required:!0},defaultBestOf:{type:Number,default:3,validator:t=>[1,3,5,7,9].includes(t)},permissions:{type:Object,required:!0,default:()=>({[N.CAN_SELECT_TEAM]:!0,[N.CAN_EDIT_DATE]:!0})}},emits:["update:state"],setup(t,{emit:p}){const a=p,i=t,n=e.ref([]),o=e.ref(null),g=e.computed(()=>{const u=new Set;return n.value.forEach(E=>{E.items.forEach(l=>{l[r.ONE].name!==y&&u.add(l[r.ONE].name),l[r.TWO].name!==y&&u.add(l[r.TWO].name)})}),Array.from(u)}),b=u=>{o.value=u},c=()=>{o.value=null},h=(u,E,l)=>{if(console.log("Updating lower match:",{roundIndex:u,matchIndex:E,updatedMatch:l}),n.value[u]&&n.value[u].items){if(n.value[u].items[E]=l,l.winner&&u<n.value.length-1){const d=u+1,m=Math.floor(E/2);if(n.value[d]&&n.value[d].items[m]){const k=n.value[d].items[m],x=E%2===0?r.ONE:r.TWO,O=l[l.winner];n.value[d].items[m]={...k,[x]:{id:O.id,name:O.name,logo:O.logo,score:0}}}}s()}},T=u=>{console.log("Updating lower columns:",u),n.value=u,s()},s=()=>{console.log("Emitting lower tournament state:",n.value),a("update:state",n.value)},f=()=>{console.log("Initializing lower tournament with state:",i.initialState),i.initialState&&i.initialState.length>0&&(n.value=JSON.parse(JSON.stringify(i.initialState)))};return e.watch(()=>i.initialState,()=>{f()},{deep:!0}),e.onMounted(()=>{f()}),(u,E)=>(e.openBlock(),e.createElementBlock("div",se,[E[0]||(E[0]=e.createElementVNode("div",{class:"text-xl font-bold text-gray-800 dark:text-white mb-4"},"Lower Bracket",-1)),e.createElementVNode("div",me,[e.createElementVNode("div",ce,[e.createElementVNode("div",de,[e.createVNode(U,{columns:n.value,"onUpdate:columns":T},null,8,["columns"]),e.createElementVNode("div",ue,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(n.value,(l,d)=>(e.openBlock(),e.createBlock($,{key:l.name,column:l,"column-index":d,"available-teams":t.availableTeams,"selected-teams":g.value,"highlighted-team":o.value,permissions:t.permissions,"onUpdate:match":h,onHighlightTeam:b,onUnhighlightTeam:c},null,8,["column","column-index","available-teams","selected-teams","highlighted-team","permissions"]))),128))])])])])]))}},C=()=>({id:null,name:y,logo:null,score:0}),A=t=>({number:t,[r.ONE]:C(),[r.TWO]:C(),winner:null,date:null}),ge=(t,p=3)=>{const a=[],i=Math.log2(t);let n=1;for(let o=0;o<i;o++){const g=Math.pow(2,i-o-1),b=[];for(let c=0;c<g;c++)b.push(A(n++));a.push({name:`Round ${o+1}`,items:b,bestOf:p})}return a},M=(t,p)=>{const a=[];let i=1;const n=Math.pow(2,t-2),o={name:"Lower Round 1",bestOf:p,items:Array(n).fill(null).map(()=>A(i++))};a.push(o);const g=Math.pow(2,t-3),b={name:"Lower Round 2",bestOf:p,items:Array(g).fill(null).map(()=>A(i++))};if(a.push(b),t>3){const c=Math.pow(2,t-4),h={name:"Lower Round 3",bestOf:p,items:Array(c).fill(null).map(()=>A(i++))};a.push(h)}return a},fe={class:"flex flex-col"},pe={class:"flex flex-col"},Te={class:"overflow-x-auto"},be={class:"min-w-max"},ye={class:"flex flex-1 p-5"},I={__name:"TournamentBracket",props:{initialState:{type:Object,required:!0},availableTeams:{type:Array,required:!0},defaultBestOf:{type:Number,required:!0},format:{type:String,required:!0},permissions:{type:Object,required:!0,default:()=>({[N.CAN_SELECT_TEAM]:!0})}},emits:["update:state"],setup(t,{emit:p}){const a=p,i=t,n=e.ref([]),o=e.ref([]),g=e.ref(null),b=e.computed(()=>{const l=new Set;return n.value.forEach(d=>{d.items.forEach(m=>{m[r.ONE].name!==y&&l.add(m[r.ONE].name),m[r.TWO].name!==y&&l.add(m[r.TWO].name)})}),i.format===B.DOUBLE_ELIMINATION&&o.value.forEach(d=>{d.items.forEach(m=>{m[r.ONE].name!==y&&l.add(m[r.ONE].name),m[r.TWO].name!==y&&l.add(m[r.TWO].name)})}),Array.from(l)}),c=l=>{g.value=l},h=()=>{g.value=null},T=(l,d,m)=>{if(console.log("Updating upper match:",{roundIndex:l,matchIndex:d,updatedMatch:m}),n.value[l]&&n.value[l].items){if(n.value[l].items[d]=m,m.winner&&l<n.value.length-1){const k=l+1,x=Math.floor(d/2);if(n.value[k]&&n.value[k].items[x]){const O=n.value[k].items[x],L=d%2===0?r.ONE:r.TWO,S=m[m.winner];n.value[k].items[x]={...O,[L]:{id:S.id,name:S.name,logo:S.logo,score:0}}}}if(i.format===B.DOUBLE_ELIMINATION&&m.winner){const k=m[m.winner===r.ONE?r.TWO:r.ONE];if(k.name!==y){const x=Math.floor(l/2),O=Math.floor(d/2);if(o.value[x]&&o.value[x].items[O]){const L=o.value[x].items[O],S=d%2===0?r.ONE:r.TWO;o.value[x].items[O]={...L,[S]:{id:k.id,name:k.name,logo:k.logo,score:0}}}}}u()}},s=l=>{console.log("Updating upper columns:",l),n.value=l,u()},f=l=>{console.log("Updating lower state:",l),o.value=l,u()},u=()=>{console.log("Emitting tournament state:",{upper:n.value,lower:i.format===B.DOUBLE_ELIMINATION?o.value:null}),a("update:state",{upper:n.value,lower:i.format===B.DOUBLE_ELIMINATION?o.value:null})},E=()=>{console.log("Initializing tournament with state:",i.initialState),i.initialState&&(Array.isArray(i.initialState)?(n.value=JSON.parse(JSON.stringify(i.initialState)),i.format===B.DOUBLE_ELIMINATION&&(o.value=M(n.value.length,i.defaultBestOf))):(n.value=JSON.parse(JSON.stringify(i.initialState.upper||[])),o.value=JSON.parse(JSON.stringify(i.initialState.lower||[]))))};return e.watch(()=>i.initialState,()=>{E()},{deep:!0}),e.watch(()=>i.format,l=>{l===B.DOUBLE_ELIMINATION&&(!o.value||o.value.length===0)&&(o.value=M(n.value.length,i.defaultBestOf),u())}),e.onMounted(()=>{E()}),(l,d)=>(e.openBlock(),e.createElementBlock("div",fe,[d[0]||(d[0]=e.createElementVNode("div",{class:"text-xl font-bold text-gray-800 dark:text-white mb-4"},"Upper Bracket",-1)),e.createElementVNode("div",pe,[e.createElementVNode("div",Te,[e.createElementVNode("div",be,[e.createVNode(U,{columns:n.value,"onUpdate:columns":s},null,8,["columns"]),e.createElementVNode("div",ye,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(n.value,(m,k)=>(e.openBlock(),e.createBlock($,{key:m.name,column:m,"column-index":k,"available-teams":t.availableTeams,"selected-teams":b.value,"highlighted-team":g.value,permissions:t.permissions,"onUpdate:match":T,onHighlightTeam:c,onUnhighlightTeam:h},null,8,["column","column-index","available-teams","selected-teams","highlighted-team","permissions"]))),128))])])])]),t.format===e.unref(B).DOUBLE_ELIMINATION?(e.openBlock(),e.createBlock(he,{key:0,"initial-state":o.value,"available-teams":t.availableTeams,"default-best-of":t.defaultBestOf,permissions:t.permissions,"onUpdate:state":f},null,8,["initial-state","available-teams","default-best-of","permissions"])):e.createCommentVNode("",!0)]))}},Ee=t=>{t.component("TournamentBracket",I)};w.PERMISSIONS=N,w.TournamentBracket=I,w.createLowerBracketStructure=M,w.createTournamentState=ge,w.install=Ee,Object.defineProperty(w,Symbol.toStringTag,{value:"Module"})});
